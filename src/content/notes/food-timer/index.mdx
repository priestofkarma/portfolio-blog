---
title: –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript
description: –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞
path: /notes/food-timer
date: 2021-07-22
tags: ["JavaScript"]
---

[–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–π–º–µ—Ä –º–æ–∂–Ω–æ –∑–¥–µ—Å—å](http://food.webofkarma.com/#timer-link)

[–ü–æ–ª–Ω—ã–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞, –≤–µ—Ä—Å—Ç–∫—É –∏ —Å—Ç–∏–ª–∏, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å (/js/modules/timer.js)](https://github.com/priestofkarma/Food/blob/master/src/)

<figure>

![—Ç–∞–π–º–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫ ‚è±](timer.png)

<figcaption>–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–π–º–µ—Ä ‚è±</figcaption>

</figure>

### –ü–æ–ª–Ω—ã–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞

<details>

<summary className="button">–ü–æ–ª–Ω—ã–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞</summary>

```js
// timer
function timer(id, deadline) {
    function getTimeRemaining(endtime) {
        const t = Date.parse(endtime) - Date.parse(new Date()),
            days = Math.floor(t / (1000 * 60 * 60 * 24)),
            hours = Math.floor(((t / 1000) * 60 * 60) % 24),
            minutes = Math.floor((t / 1000 / 60) % 60),
            seconds = Math.floor((t / 1000) % 60);

        return {
            total: t,
            days: days,
            hours: hours,
            minutes: minutes,
            seconds: seconds,
        };
    }

    function getZero(num) {
        if (num >= 0 && num < 10) {
            return `0${num}`;
        } else {
            return num;
        }
    }

    function setClock(selector, endtime) {
        const timer = document.querySelector(selector),
            days = timer.querySelector("#days"),
            hours = timer.querySelector("#hours"),
            minutes = timer.querySelector("#minutes"),
            seconds = timer.querySelector("#seconds"),
            timeInterval = setInterval(updateClock, 1000);

        updateClock();

        function updateClock() {
            const t = getTimeRemaining(endtime);
            days.innerHTML = getZero(t.days);
            hours.innerHTML = getZero(t.hours);
            minutes.innerHTML = getZero(t.minutes);
            seconds.innerHTML = getZero(t.seconds);

            if (t.total <= 0) {
                clearInterval(timeInterval);
            }
        }
    }

    setClock(id, deadline);
}

timer(".timer", "2022-05-20");
```

</details>

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏

-   `id` - —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
-   `deadline` - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è —Ç–∞–π–º–µ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "2021-05-26"

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ —Ç–∞–π–º–µ—Ä–∞ - –≤—ã–≤–æ–¥–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è
–¥–Ω–∏/—á–∞—Å—ã/–º–∏–Ω—É—Ç—ã/—Å–µ–∫—É–Ω–¥—ã –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –¥–∞—Ç—ã.

#### –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏ `getTimeRemaining(endtime)`

–ü–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏ `endtime` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ "2021-05-26".

<InfoMd title="–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ?">

–ï—Å–ª–∏ —Ç–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≤—è–∑—ã–≤–∞—Ç—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏, —Ç–æ –≤ –Ω–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å
input —Å type="date", –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞—Ç—É –∏–º–µ–Ω–Ω–æ –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [input type="date"](https://developer.mozilla.org/ru/docs/Web/HTML/Element/Input/date)

</InfoMd>

–ê –∫–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –≤–æ –≤—Ä–µ–º–µ–Ω–∏?

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–∞—Ç—ã
–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –º–µ—Ç–æ–¥–æ–º `parse` –æ–±—ä–µ–∫—Ç–∞ `Date`.
[–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –º–µ—Ç–æ–¥ `parse`](https://learn.javascript.ru/date#razbor-stroki-s-datoy)

–ü–µ—Ä–µ–º–µ–Ω–Ω–æ–π t –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ä–∞–∑–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
` new Date()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è.

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–º `days, hours, minutes, seconds` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º –≤—Ä–µ–º—è.
–í 11 —Å—Ç—Ä–æ–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç —Å —ç—Ç–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

```javascript{numberLines: 4}
function getTimeRemaining(endtime) {
    const t = Date.parse(endtime) - Date.parse(new Date()),
        days = Math.floor(t / (1000 * 60 * 60 * 24)),
        hours = Math.floor(((t / 1000) * 60 * 60) % 24),
        minutes = Math.floor((t / 1000 / 60) % 60),
        seconds = Math.floor((t / 1000) % 60);

    return {
        total: t,
        days: days,
        hours: hours,
        minutes: minutes,
        seconds: seconds,
    };
}
```

#### –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏

##### –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ `setClock(selector, endtime)`

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏:

-   `selector` - —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `id` —Ñ—É–Ω–∫—Ü–∏–∏ `timer()`
-   `endtime` - —Ç–∞ —Å–∞–º–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `"2021-05-26"`

–í —Å—Ç—Ä–æ–∫–∞—Ö 28 - 32 –∏—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏
–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –ø—Ä–∏—Å–≤–∞–µ–º –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º.
–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞, —Ç–æ –≤ `selector` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å
`id` —ç–ª–µ–º–µ–Ω—Ç–∞, –∞ –≤ `days, hours, minutes, seconds` - –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å `class`-–º–∏.

##### –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ `updateClock()`

–í –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `t` –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é `getTimeRemaining(endtime)`,
–∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–∏.

–í —Å—Ç—Ä–æ–∫–∞—Ö 39 - 42 –≤—ã–≤–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ —Å–∞–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è –∫–∞–∫ –Ω–∞ —á–∞—Å–∞—Ö, –æ–±—Ä–∞–±–æ—Ç–∞–µ–º —á–∏—Å–ª–∞ —Ñ—É–Ω–∫—Ü–∏–µ–π `getZero(num)`.

–§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ, –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —á–∏—Å–ª–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `num`, –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å–ª–∏
—ç—Ç–æ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ 0 –∏ –º–µ–Ω—å—à–µ 10, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ —á–∏—Å–ª–æ —Å "0" –≤–Ω–∞—á–∞–ª–µ.
–ò–Ω–∞—á–µ - –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ —á–∏—Å–ª–æ.

```javascript{numberLines: 19}
function getZero(num) {
    if (num >= 0 && num < 10) {
        return `0${num}`;
    } else {
        return num;
    }
}
```

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É, –Ω—É–∂–Ω–æ (–∫–∞–∫ –Ω–µ —Å—Ç—Ä–∞–Ω–Ω–æ üòÖ)
–≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `updateClock()` –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É.

–î–ª—è —ç—Ç–æ–≥–æ, –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `timeInterval` - –ø—Ä–∏—Å–≤–æ–∏–º –º–µ—Ç–æ–¥ `setInterval(updateClock, 1000)`
–≤ –∫–æ—Ç–æ—Ä—ã–π, –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é `updateClock`,
–∞ –≤—Ç–æ—Ä—ã–º - –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –∫–∞–∂–¥—ã–π —Ä–∞–∑
–±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏—è `updateClock`.

–ù–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏.

–î–ª—è —ç—Ç–æ–≥–æ, –≤ —Å—Ç—Ä–æ–∫–∞—Ö 44 - 46 —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É,
–µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–≤–Ω—è–µ—Ç—Å—è –∏–ª–∏ –º–µ–Ω—å—à–µ 0 - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä.

```javascript{numberLines: 27}
function setClock(selector, endtime) {
    const timer = document.querySelector(selector),
        days = timer.querySelector("#days"),
        hours = timer.querySelector("#hours"),
        minutes = timer.querySelector("#minutes"),
        seconds = timer.querySelector("#seconds"),
        timeInterval = setInterval(updateClock, 1000);

    updateClock();

    function updateClock() {
        const t = getTimeRemaining(endtime);
        days.innerHTML = getZero(t.days);
        hours.innerHTML = getZero(t.hours);
        minutes.innerHTML = getZero(t.minutes);
        seconds.innerHTML = getZero(t.seconds);

        if (t.total <= 0) {
            clearInterval(timeInterval);
        }
    }
}

setClock(id, deadline);
```

–í —Å—Ç—Ä–æ–∫–µ 53 –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–∫–Ω—Ü–∏—é `timer(id, deadline)`.

```javascript{numberLines: 27}
timer(".timer", "2022-05-20");
```

–í–æ—Ç –∏ –≤—Å—ë, —Ñ—É–Ω–∫—Ü–∏–µ–π –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è :)

–§—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –≤—Å—è—á–µ—Å–∫–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å. –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–∞–π–º–µ—Ä –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏,
—ç—Ç–æ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π "—Ñ–µ–π–∫–æ–≤—ã–π —Ç–∞–π–º–µ—Ä". –ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞,
–∏–ª–∏ –≤ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.
