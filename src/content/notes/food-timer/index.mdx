---
title: –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ —Ç–∞–π–º–µ—Ä –Ω–∞ —á–∏—Å—Ç–æ–º—É JavaScript
description: –ì–æ—Ç–æ–≤–∏–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞ —Ç–∞ –ø–æ—è—Å–Ω–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –∫–æ–¥—É
path: /notes/food-timer
date: 2021-07-22
tags: ["JavaScript"]
---

[–ü–æ–¥–∏–≤–∏—Ç–∏—Å—è —Ç–∞–π–º–µ—Ä –º–æ–∂–Ω–∞ —Ç—É—Ç](http://food.webofkarma.com/#timer-link)

[–ü–æ–≤–Ω–∏–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞, –≤–µ—Ä—Å—Ç–∫—É —Ç–∞ —Å—Ç–∏–ª—ñ, –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —Ç—É—Ç (/js/modules/timer.js)](https://github.com/priestofkarma/Food/blob/master/src/)

<figure>

![—Ç–∞–π–º–µ—Ä –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫ ‚è±](timer.png)

<figcaption>–¢–∞–∫ –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–π–º–µ—Ä ‚è±</figcaption>

</figure>

### –ü–æ–≤–Ω–∏–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞

<details>

<summary className="button">–ü–æ–≤–Ω–∏–π –∫–æ–¥ —Ç–∞–π–º–µ—Ä–∞</summary>

```js
// timer
function timer(id, deadline) {
    function getTimeRemaining(endtime) {
        const t = Date.parse(endtime) - Date.parse(new Date()),
            days = Math.floor(t / (1000 * 60 * 60 * 24)),
            hours = Math.floor(((t / 1000) * 60 * 60) % 24),
            minutes = Math.floor((t / 1000 / 60) % 60),
            seconds = Math.floor((t / 1000) % 60);

        return {
            total: t,
            days: days,
            hours: hours,
            minutes: minutes,
            seconds: seconds,
        };
    }

    function getZero(num) {
        if (num >= 0 && num < 10) {
            return `0${num}`;
        } else {
            return num;
        }
    }

    function setClock(selector, endtime) {
        const timer = document.querySelector(selector),
            days = timer.querySelector("#days"),
            hours = timer.querySelector("#hours"),
            minutes = timer.querySelector("#minutes"),
            seconds = timer.querySelector("#seconds"),
            timeInterval = setInterval(updateClock, 1000);

        updateClock();

        function updateClock() {
            const t = getTimeRemaining(endtime);
            days.innerHTML = getZero(t.days);
            hours.innerHTML = getZero(t.hours);
            minutes.innerHTML = getZero(t.minutes);
            seconds.innerHTML = getZero(t.seconds);

            if (t.total <= 0) {
                clearInterval(timeInterval);
            }
        }
    }

    setClock(id, deadline);
}

timer(".timer", "2022-05-20");
```

</details>

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—ó

- `id` - —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–∞–π–º–µ—Ä—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- `deadline` - –¥–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –¥—ñ—ó —Ç–∞–π–º–µ—Ä–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ "2021-05-26"

### –Ø–∫ –ø—Ä–∞—Ü—é—î:

–û—Å–Ω–æ–≤–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞ - –≤–∏–≤–æ–¥–∏—Ç–∏ —Ä–µ—à—Ç—É
–¥–Ω—ñ/–≥–æ–¥–∏–Ω–∏/—Ö–≤–∏–ª–∏–Ω–∏/—Å–µ–∫—É–Ω–¥–∏ –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –¥–æ –ø–µ–≤–Ω–æ—ó –¥–∞—Ç–∏.

#### –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –≤ —á–∞—Å—ñ `getTimeRemaining(endtime)`

–ü–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü—ñ—ó endtime –ø—Ä–∏–π–º–∞—î –¥–∞—Ç—É —É —Ñ–æ—Ä–º–∞—Ç—ñ "2021-05-26".

<InfoMd title="–ß–æ–º—É —Å–∞–º–µ —É —Ç–∞–∫–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ?">

–Ø–∫—â–æ —Ç–∞–∫–∏–π —Å–∫—Ä–∏–ø—Ç –ø—ñ–¥–≤'—è–∑—É–≤–∞—Ç–∏ –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ, —Ç–æ –≤ –Ω—ñ–π –º–æ–∂–µ –±—É—Ç–∏
input –∑ type="date", —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞—Ç—É —Å–∞–º–µ —É —Ç–∞–∫–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ.

–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ: [input type="date"](https://developer.mozilla.org/ru/docs/Web/HTML/Element/Input/date)

</InfoMd>

–ê —è–∫ –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é —É —á–∞—Å—ñ?

–ù–∞—Å–∞–º–ø–µ—Ä–µ–¥ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ä—è–¥–æ–∫ –¥–∞—Ç–∏
—É –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∏ –º–µ—Ç–æ–¥–æ–º `parse` –æ–±'—î–∫—Ç–∞ `Date`.

[–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ –º–µ—Ç–æ–¥ `parse`](https://learn.javascript.ru/date#razbor-stroki-s-datoy)

–ó–º—ñ–Ω–Ω—ñ–π t –ø—Ä–∏–≤–ª–∞—Å–Ω—é—î–º–æ —Ä—ñ–∑–Ω–∏—Ü—é —á–∞—Å—É –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–∞ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É.
` new Date()` –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω—É –¥–∞—Ç—É —Ç–∞ —á–∞—Å.

–ó–º—ñ–Ω–Ω–∏–º `days, hours, minutes, seconds` –Ω–∞–¥–∞—é—Ç—å —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∏–π –∑–∞ —Ñ–æ—Ä–º—É–ª–∞–º–∏ —á–∞—Å.
–£ 11 —Ä—è–¥–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–±'—î–∫—Ç —ñ–∑ —Ü–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏.

```javascript{numberLines: 4}
function getTimeRemaining(endtime) {
    const t = Date.parse(endtime) - Date.parse(new Date()),
        days = Math.floor(t / (1000 * 60 * 60 * 24)),
        hours = Math.floor(((t / 1000) * 60 * 60) % 24),
        minutes = Math.floor((t / 1000 / 60) % 60),
        seconds = Math.floor((t / 1000) % 60);

    return {
        total: t,
        days: days,
        hours: hours,
        minutes: minutes,
        seconds: seconds,
    };
}
```

#### –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å—É

##### –§—É–Ω–∫—Ü—ñ—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è `setClock(selector, endtime)`

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—ó:

- `selector` - —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞, —è–∫–∏–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `id` —Ñ—É–Ω–∫—Ü—ñ—ó `timer()`
- `endtime` - —Ç–æ–π —Å–∞–º–∏–π —Ä—è–¥–æ–∫ –¥–∞—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ `"2021-05-26"`

–£ —Ä—è–¥–∫–∞—Ö 28 - 32 —à—É–∫–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —á–∞—Å—É
–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Ç–∞ –Ω–∞–¥–∞—î–º–æ —ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º –∑–º—ñ–Ω–Ω–∏–º.
–Ø–∫—â–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –±—É–¥–µ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞, —Ç–æ –≤ selector –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏
`id` –µ–ª–µ–º–µ–Ω—Ç–∞, –∞ –≤ `days, hours, minutes, seconds` - –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ `class`-–º–∏.

##### –§—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å—É `updateClock()`

–£ –ª–æ–∫–∞–ª—å–Ω—ñ–π –∑–º—ñ–Ω–Ω—ñ–π `t` –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `getTimeRemaining(endtime)`,
—è–∫–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç —ñ–∑ –¥–∞–Ω–∏–º–∏ —á–∞—Å—É.

–£ —Ä—è–¥–∫–∞—Ö 39 - 42 –≤–∏–≤–æ–¥–∏–º–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç—ñ —Å–∞–º—ñ –¥–∞–Ω—ñ —á–∞—Å—É —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏.

–î–ª—è —Ç–æ–≥–æ —â–æ–± –∫—Ä–∞—Å–∏–≤–æ –≤–∏–≤–µ—Å—Ç–∏ —á–∞—Å —è–∫ –Ω–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫—É, –æ–±—Ä–æ–±–∏–º–æ —á–∏—Å–ª–∞ —Ñ—É–Ω–∫—Ü—ñ—î—é `getZero(num)`.

–§—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î –ø—Ä–æ—Å—Ç–æ, –≤–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î —á–∏—Å–ª–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ `num`, —ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —è–∫—â–æ
—Ü–µ —á–∏—Å–ª–æ –±—ñ–ª—å—à–µ –∞–±–æ 0 —ñ –º–µ–Ω—à–µ 10, —Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î —Ü–µ —á–∏—Å–ª–æ –∑ "0" —Å–ø–æ—á–∞—Ç–∫—É.
–Ü–Ω–∞–∫—à–µ ‚Äì –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î —Ü–µ —á–∏—Å–ª–æ.

```javascript{numberLines: 19}
function getZero(num) {
    if (num >= 0 && num < 10) {
        return `0${num}`;
    } else {
        return num;
    }
}
```

–î–ª—è —Ç–æ–≥–æ, —â–æ–± —á–∞—Å –æ–Ω–æ–≤–ª—é–≤–∞–≤—Å—è –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É, –ø–æ—Ç—Ä—ñ–±–Ω–æ (—è–∫ –Ω–µ –¥–∏–≤–Ω–æ üòÖ)
–≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `updateClock()` –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É.

–î–ª—è —Ü—å–æ–≥–æ, –∑–º—ñ–Ω–Ω–æ—ó `timeInterval` - –ø—Ä–∏–≤–ª–∞—Å–Ω–∏–º –º–µ—Ç–æ–¥ `setInterval(updateClock, 1000)`
–≤ —è–∫–∏–π –ø–µ—Ä—à–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `updateClock`,
–∞ –¥—Ä—É–≥–∏–º - —ñ–Ω—Ç–µ—Ä–≤–∞–ª —á–∞—Å—É –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö, —á–µ—Ä–µ–∑ —è–∫–∏–π —â–æ—Ä–∞–∑—É
–±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—å —Ñ—É–Ω–∫—Ü—ñ—è `updateClock`.

–ù–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± —Ç–∞–π–º–µ—Ä –∑—É–ø–∏–Ω–∏–≤—Å—è –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —á–∞—Å—É.

–î–ª—è —Ü—å–æ–≥–æ, —É —Ä—è–¥–∫–∞—Ö 44 - 46 —Å—Ç–≤–æ—Ä–∏–º–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É,
—è–∫—â–æ —Ä—ñ–∑–Ω–∏—Ü—è —á–∞—Å—É –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–∞ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –¥–æ—Ä—ñ–≤–Ω—é—î –∞–±–æ –º–µ–Ω—à–µ 0 ‚Äì –∑—É–ø–∏–Ω—è—î–º–æ —Ç–∞–π–º–µ—Ä.

```javascript{numberLines: 27}
function setClock(selector, endtime) {
    const timer = document.querySelector(selector),
        days = timer.querySelector("#days"),
        hours = timer.querySelector("#hours"),
        minutes = timer.querySelector("#minutes"),
        seconds = timer.querySelector("#seconds"),
        timeInterval = setInterval(updateClock, 1000);

    updateClock();

    function updateClock() {
        const t = getTimeRemaining(endtime);
        days.innerHTML = getZero(t.days);
        hours.innerHTML = getZero(t.hours);
        minutes.innerHTML = getZero(t.minutes);
        seconds.innerHTML = getZero(t.seconds);

        if (t.total <= 0) {
            clearInterval(timeInterval);
        }
    }
}

setClock(id, deadline);
```

–£ —Ä—è–¥–∫—É 53 –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `timer(id, deadline)`.

```javascript{numberLines: 27}
timer(".timer", "2022-05-20");
```

–û—Å—å —ñ –≤—Å–µ, —Ñ—É–Ω–∫—Ü—ñ—î—é –º–æ–∂–Ω–∞ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è :)

–§—É–Ω–∫—Ü—ñ—é –º–æ–∂–Ω–∞ –≤—Å—ñ–ª—è–∫–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏. –ú–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ç–∞–π–º–µ—Ä –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —á–∞—Å—É,
—Ü–µ —Ç–∞–∫ –∑–≤–∞–Ω–∏–π "—Ñ–µ–π–∫–æ–≤–∏–π —Ç–∞–π–º–µ—Ä". –ú–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —ñ–Ω—à—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞,
–∞–±–æ —É –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π —á–∞—Å.